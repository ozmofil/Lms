public async Task<IReadOnlyList<StorageItem>> ListAsync(string prefix)
{
    var request = new ListObjectsV2Request
    {
        BucketName = _bucketName,
        Prefix     = prefix
    };

    var response = await _s3Client.ListObjectsV2Async(request);

    var items = new List<StorageItem>();

    foreach (var obj in response.S3Objects)
    {
        // klasör görünümlü olanları atla (key "/" ile bitiyor olabilir)
        if (obj.Key.EndsWith("/")) continue;

        // Her obje için pre-signed URL üret
        var urlRequest = new GetPreSignedUrlRequest
        {
            BucketName = _bucketName,
            Key        = obj.Key,
            Expires    = DateTime.UtcNow.AddMinutes(30)
        };

        var url = _s3Client.GetPreSignedURL(urlRequest);

        items.Add(new StorageItem
        {
            Key         = obj.Key,
            Url         = url,
            ContentType = DetectContentTypeFromKey(obj.Key) // basit helper
        });
    }

    return items;
}

private string DetectContentTypeFromKey(string key)
{
    if (key.Contains("/videos/", StringComparison.OrdinalIgnoreCase)) return "Mp4";
    if (key.Contains("/pdfs/", StringComparison.OrdinalIgnoreCase))   return "Pdf";
    if (key.Contains("/scorm/", StringComparison.OrdinalIgnoreCase))  return "Scorm";
    if (key.Contains("/xapi/", StringComparison.OrdinalIgnoreCase))   return "Xapi";
    return "Unknown";
}
